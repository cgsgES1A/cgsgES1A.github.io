<html>

<head>
    <title>Calendar</title>

    <script type="text/javascript">
        var current_datetime;
        var day;
        var month;
        var year;
        var day_week;
        var Shift = [6, 9, 2, 5, 7, 3, 5, 8, 4, 6, 9, 4];
        var NumOfDays = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
        var first_day;
        var first_day_year;
        if (year % 4 == 0 && year % 100 != 0)
            NumOfDays[1]++;

        function init() {
            var days = 0;
            current_datetime = new Date();
            day = current_datetime.getDate();
            month = current_datetime.getMonth();
            year = current_datetime.getFullYear();
            day_week = current_datetime.getDay();
            document.getElementById('input_month').value = month;
            document.getElementById('input_year').value = year;
            if (day_week == 0)
                day_week = 7;

            first_day = day_week - (day - 1) % 7;

            for (var i = 0; i < month; i++)
                days += NumOfDays[i];
            first_day_year = day_week - days % 7;
            if (first_day_year < 0)
                first_day_year = 7 - first_day_year;
        }
    </script>


</head>


<body onload="init();">
    <script>
        function update_month() {
            data = document.getElementById('input_month').value;

            month = parseInt(data) - 1;
            if (isNaN(month))
                month = current_datetime.getMonth();
            first_day = (first_day_year + Shift[month] + 1) % 7;
        }
        function update_year() {
            data = document.getElementById('input_year').value;

            year = parseInt(data);
            if (isNaN(year))
                year = current_datetime.getFullYear();
        }
        /* Temporaty version (uncorrect work with using while or for) */
        setInterval(function () {
            document.getElementById(0 + first_day).innerHTML = 1;
        }, 10);
        setInterval(function () {
            document.getElementById(1 + first_day).innerHTML = 2;
        }, 10);
        setInterval(function () {
            document.getElementById(2 + first_day).innerHTML = 3;
        }, 10);
        setInterval(function () {
            document.getElementById(3 + first_day).innerHTML = 4;
        }, 10);
        setInterval(function () {
            document.getElementById(4 + first_day).innerHTML = 5;
        }, 10);
        setInterval(function () {
            document.getElementById(5 + first_day).innerHTML = 6;
        }, 10);
        setInterval(function () {
            document.getElementById(6 + first_day).innerHTML = 7;
        }, 10);
        setInterval(function () {
            document.getElementById(7 + first_day).innerHTML = 8;
        }, 10);
        setInterval(function () {
            document.getElementById(8 + first_day).innerHTML = 9;
        }, 10);
        setInterval(function () {
            document.getElementById(9 + first_day).innerHTML = 10;
        }, 10);
        setInterval(function () {
            document.getElementById(10 + first_day).innerHTML = 11;
        }, 10);
        setInterval(function () {
            document.getElementById(11 + first_day).innerHTML = 12;
        }, 10);
        setInterval(function () {
            document.getElementById(12 + first_day).innerHTML = 13;
        }, 10);
        setInterval(function () {
            document.getElementById(13 + first_day).innerHTML = 14;
        }, 10);
        setInterval(function () {
            document.getElementById(14 + first_day).innerHTML = 15;
        }, 10);
        setInterval(function () {
            document.getElementById(15 + first_day).innerHTML = 16;
        }, 10);
        setInterval(function () {
            document.getElementById(16 + first_day).innerHTML = 17;
        }, 10);
        setInterval(function () {
            document.getElementById(17 + first_day).innerHTML = 18;
        }, 10);
        setInterval(function () {
            document.getElementById(18 + first_day).innerHTML = 19;
        }, 10);
        setInterval(function () {
            document.getElementById(19 + first_day).innerHTML = 20;
        }, 10);
        setInterval(function () {
            document.getElementById(20 + first_day).innerHTML = 21;
        }, 10);
        setInterval(function () {
            document.getElementById(21 + first_day).innerHTML = 22;
        }, 10);
        setInterval(function () {
            document.getElementById(22 + first_day).innerHTML = 23;
        }, 10);
        setInterval(function () {
            document.getElementById(23 + first_day).innerHTML = 24;
        }, 10);
        setInterval(function () {
            document.getElementById(24 + first_day).innerHTML = 25;
        }, 10);
        setInterval(function () {
            document.getElementById(25 + first_day).innerHTML = 26;
        }, 10);
        setInterval(function () {
            document.getElementById(26 + first_day).innerHTML = 27;
        }, 10);
        setInterval(function () {
            document.getElementById(27 + first_day).innerHTML = 28;
        }, 10);
        if (NumOfDays[month] > 28) {
            setInterval(function () {
                document.getElementById(28 + first_day).innerHTML = 29;
            }, 10);
            if (NumOfDays[month] > 29) {
                setInterval(function () {
                    document.getElementById(29 + first_day).innerHTML = 30;
                }, 10);
                if (NumOfDays[month] > 30)
                    setInterval(function () {
                        document.getElementById(30 + first_day).innerHTML = 31;
                    }, 10);
            }
        }

        //document.getElementById(13).style = "background-color:MediumPurple";
    </script>

    <div id="current_date_time_block"></div>

    <table border="2">
        <tr>
            <td id="1">.</td>
            <td id="2">.</td>
            <td id="3">.</td>
            <td id="4">.</td>
            <td id="5">.</td>
            <td id="6">.</td>
            <td id="7">.</td>
        </tr>
        <tr>
            <td id="8">.</td>
            <td id="9">.</td>
            <td id="10">.</td>
            <td id="11">.</td>
            <td id="12">.</td>
            <td id="13">.</td>
            <td id="14">.</td>
        </tr>
        <tr>
            <td id="15">.</td>
            <td id="16">.</td>
            <td id="17">.</td>
            <td id="18"></td>
            <td id="19">.</td>
            <td id="20">.</td>
            <td id="21">.</td>
        </tr>
        <tr>
            <td id="22">.</td>
            <td id="23">.</td>
            <td id="24">.</td>
            <td id="25">.</td>
            <td id="26">.</td>
            <td id="27">.</td>
            <td id="28">.</td>
        </tr>
        <tr>
            <td id="29">.</td>
            <td id="30">.</td>
            <td id="31">.</td>
            <td id="32">.</td>
            <td id="33">.</td>
            <td id="34">.</td>
            <td id="35">.</td>
        </tr>
        <tr>

            <td id="36">.</td>
            <td id="37">.</td>
            <td id="38">.</td>
            <td id="39">.</td>
            <td id="40">.</td>
            <td id="41">.</td>
            <td id="42">.</td>
        </tr>
    </table>

    <br>
    <label for="input_month"> month</label> <input type="text" id="input_month" onkeyup="update_month()"
        style="background-color:MediumPurple">
    <br>
    <label for="input_year"> year</label> <input type="text" id="input_year" onkeyup="update_year()"
        style="background-color:MediumPurple">
</body>

</html>